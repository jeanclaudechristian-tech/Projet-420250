<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tuto+ — Gestion des Comptes (Statique)</title>
  <style>
    /* ==== Styles de l'utilisateur (tels que fournis) ==== */
    :root {
      --rouge: #c1121f;
      --rouge-fonce: #8b0e16;
      --noir: #111;
      --blanc: #fff;
      --vert: #1b8f3a;
      /* pour les badges "disponible" */
    }

    /* === STYLE GLOBAL === */
    body {
      font-family: "Inter", sans-serif;
      background-color: var(--blanc);
      color: var(--noir);
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }

    /* === NAVBAR === */
    .tp-nav {
      background-color: var(--rouge);
      color: var(--blanc);
      padding: 0.75rem 1.5rem;
    }

    .tp-nav__inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .tp-nav__logo {
      height: 50px;
    }

    .tp-nav__menu a {
      color: var(--blanc);
      text-decoration: none;
      margin-left: 1.5rem;
      font-weight: 600;
      transition: color 0.2s;
    }

    .tp-nav__menu a:hover {
      color: var(--noir);
    }

    /* === CONTENU PRINCIPAL === */
    main {
      max-width: 1100px;
      margin: 2rem auto;
      padding: 0 1rem 2rem;
    }

    h1,
    h2 {
      color: var(--rouge);
    }

    h2 {
      font-size: 1.6rem;
      margin-bottom: 0.75rem;
      border-bottom: 2px solid var(--rouge);
      display: inline-block;
      padding-bottom: 0.25rem;
    }

    /* Cartes / blocs */
    .carte {
      background: #ffffff;
      border-radius: 10px;
      padding: 1rem 1.25rem;
      border: 2px solid var(--rouge);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      margin-bottom: 1rem;
    }

    /* Boutons */
    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }

    .bouton {
      padding: 0.5rem 0.9rem;
      border-radius: 6px;
      border: 2px solid transparent;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .bouton.primaire {
      background-color: var(--rouge);
      color: var(--blanc);
      border-color: var(--rouge);
    }

    .bouton.primaire:hover {
      background-color: var(--rouge-fonce);
    }

    .bouton.ghost {
      background: transparent;
      border-color: var(--rouge);
      color: var(--rouge);
    }

    .bouton.ghost:hover {
      background: #ffe8ea;
    }

    .bouton.neutre {
      background: #f2f2f2;
      border-color: #ddd;
      color: #222;
    }

    .bouton.neutre:hover {
      background: #e9e9e9;
    }

    /* Badges */
    .badge {
      display: inline-block;
      font-size: 0.85rem;
      font-weight: 700;
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      border: 1px solid currentColor;
    }

    .badge.actif {
      color: #145c36;
      background: #d2f4e3;
    }

    .badge.inactif {
      color: #8b0e16;
      background: #ffe2e6;
    }

    /* Tableau */
    .table-wrap {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th,
    td {
      text-align: left;
      padding: 0.6rem 0.6rem;
      border-bottom: 1px solid #eee;
      vertical-align: middle;
    }

    th {
      font-size: 0.92rem;
      color: #444;
      font-weight: 700;
    }

    tr:hover {
      background: #fff8f8;
    }

    /* Barre outils */
    .toolbar {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.5rem;
    }

    input[type="search"],
    select,
    input[type="text"],
    input[type="email"] {
      padding: 0.55rem 0.7rem;
      border: 1px solid #bbb;
      border-radius: 6px;
      font-size: 0.95rem;
    }

    select {
      background: #fff;
    }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.45);
      z-index: 50;
    }

    .modal.open {
      display: flex;
    }

    .modal .box {
      width: min(560px, 92vw);
      background: #fff;
      border-radius: 12px;
      border: 2px solid var(--rouge);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
      overflow: hidden;
    }

    .modal .box header {
      padding: 0.9rem 1.1rem;
      background: var(--rouge);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .modal .box .content {
      padding: 1rem 1.1rem 1.25rem;
    }

    .modal .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
    }

    .modal .grid .full {
      grid-column: 1 / -1;
    }

    .close-x {
      background: transparent;
      border: 0;
      color: #fff;
      font-size: 1.4rem;
      cursor: pointer;
    }

    /* Toast */
    .toast {
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      background: #1b4332;
      color: #f1f1f1;
      padding: 10px 14px;
      border-radius: 20px;
      font-size: 0.9rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      z-index: 60;
      display: none;
    }

    .toast.show {
      display: block;
    }

    /* Responsive */
    @media (max-width: 720px) {
      .modal .grid {
        grid-template-columns: 1fr;
      }

      th:nth-child(3),
      td:nth-child(3),
      th:nth-child(4),
      td:nth-child(4) {
        display: none;
      }
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="tp-nav">
    <div class="tp-nav__inner">
      <div style="display:flex;align-items:center;gap:12px;">
        <img class="tp-nav__logo" src="..\assets\images\CollegeAhuntsic_Logo.png" alt="Logo Tuto+" />
      </div>
      <div class="tp-nav__menu">
        <a href="statistique.html">Statistiques</a>
      </div>
    </div>
  </nav>

  <main>
    <header style="margin-bottom:1rem;">
      <h1 style="margin:0;">Gestion des Comptes</h1>
      <p style="margin:0.25rem 0 0;">Interface statique simulant <em>consulter / modifier / activer / désactiver</em> et
        un aperçu de gestion des rendez‑vous.</p>
    </header>

    <!-- Outils / filtres -->
    <section class="carte">
      <div class="toolbar">
        <input id="search" type="search" placeholder="Rechercher par nom ou email…" />
        <select id="filtreRole" aria-label="Filtrer par rôle">
          <option value="">Tous les rôles</option>
          <option>Étudiant</option>
          <option>Tuteur</option>
          <option>Admin</option>
        </select>
        <select id="filtreStatut" aria-label="Filtrer par statut">
          <option value="">Tous les statuts</option>
          <option value="actif">Actif</option>
          <option value="inactif">Inactif</option>
        </select>
        <div style="margin-left:auto;" class="actions">
          <button class="bouton ghost" onclick="resetFiltres()">Réinitialiser</button>
          <button class="bouton primaire" onclick="ouvrirModalCreation()">Créer un compte</button>
        </div>
      </div>
    </section>

    <!-- Liste comptes -->
    <section class="carte">
      <div class="table-wrap">
        <table id="tableComptes">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nom</th>
              <th>Rôle</th>
              <th>Email</th>
              <th>Statut</th>
              <th style="width:360px;">Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- lignes injectées en JS -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Panneau rendez-vous (aperçu statique) -->
    <section class="carte">
      <h2>Gestion des rendez‑vous (aperçu)</h2>
      <p>Sélectionnez un utilisateur « Étudiant » ou « Tuteur » dans la table pour voir un exemple d’horaire /
        rendez‑vous.</p>
      <div id="rdvZone" class="table-wrap" aria-live="polite">
        <em>Aucune sélection pour l’instant.</em>
      </div>
    </section>

    <footer style="text-align:center;color:#666;margin-top:1.5rem;">
      © 2025 Tuto+ — Interface de démonstration statique
    </footer>
  </main>

  <!-- Modal Modifier/Créer -->
  <div class="modal" id="modalCompte" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="box">
      <header>
        <strong id="modalTitre">Modifier le compte</strong>
        <button class="close-x" aria-label="Fermer" onclick="fermerModal()">×</button>
      </header>
      <div class="content">
        <form onsubmit="event.preventDefault(); sauvegarderCompte();">
          <div class="grid">
            <div class="full">
              <label for="f_id">ID</label><br />
              <input id="f_id" type="text" disabled>
            </div>
            <div>
              <label for="f_nom">Nom</label><br />
              <input id="f_nom" type="text" required>
            </div>
            <div>
              <label for="f_role">Rôle</label><br />
              <select id="f_role" required>
                <option>Étudiant</option>
                <option>Tuteur</option>
                <option>Admin</option>
              </select>
            </div>
            <div class="full">
              <label for="f_email">Email</label><br />
              <input id="f_email" type="email" required>
            </div>
            <div>
              <label for="f_statut">Statut</label><br />
              <select id="f_statut">
                <option value="actif">Actif</option>
                <option value="inactif">Inactif</option>
              </select>
            </div>
          </div>
          <div class="actions" style="margin-top:1rem;justify-content:flex-end;">
            <button type="button" class="bouton neutre" onclick="fermerModal()">Annuler</button>
            <button type="submit" class="bouton primaire">Sauvegarder</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div id="toast" class="toast">Changements sauvegardés</div>

  <script>
    // --- Données statiques de démonstration ---
    const comptes = [
      { id: 101, nom: "Alice Tremblay", role: "Étudiant", email: "alice@etu.ca", statut: "actif" },
      { id: 102, nom: "Marc Nguyen", role: "Tuteur", email: "marc@tuto.ca", statut: "actif" },
      { id: 103, nom: "Sarah Lavoie", role: "Étudiant", email: "sarah@etu.ca", statut: "inactif" },
      { id: 104, nom: "Admin Central", role: "Admin", email: "admin@tuto.ca", statut: "actif" },
      { id: 105, nom: "Omar Benali", role: "Tuteur", email: "omar@tuto.ca", statut: "actif" },
      { id: 106, nom: "Jenny Park", role: "Étudiant", email: "jenny@etu.ca", statut: "actif" }
    ];

    let filtreRole = document.getElementById('filtreRole');
    let filtreStatut = document.getElementById('filtreStatut');
    let search = document.getElementById('search');
    let tbody = document.querySelector('#tableComptes tbody');

    function badge(statut) {
      const cls = statut === 'actif' ? 'badge actif' : 'badge inactif';
      const txt = statut === 'actif' ? 'Actif' : 'Inactif';
      return `<span class="${cls}">${txt}</span>`;
    }

    function ligneActions(c) {
      const toggleLib = c.statut === 'actif' ? 'Désactiver' : 'Activer';
      return `
    <div class="actions">
      <button class="bouton neutre" onclick="consulter(${c.id})">Consulter</button>
      <button class="bouton ghost" onclick="ouvrirModal(${c.id})">Modifier</button>
      <button class="bouton primaire" onclick="toggleStatut(${c.id})">${toggleLib}</button>
      ${c.role !== 'Admin' ? `<button class="bouton neutre" onclick="voirRDV(${c.id})">Gérer rendez‑vous</button>` : ''}
    </div>
  `;
    }

    function render() {
      const q = search.value.toLowerCase();
      const role = filtreRole.value;
      const statut = filtreStatut.value;
      tbody.innerHTML = "";
      comptes
        .filter(c => (role ? c.role === role : true))
        .filter(c => (statut ? c.statut === statut : true))
        .filter(c => (q ? (c.nom.toLowerCase().includes(q) || c.email.toLowerCase().includes(q)) : true))
        .forEach(c => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
        <td>${c.id}</td>
        <td>${c.nom}</td>
        <td>${c.role}</td>
        <td>${c.email}</td>
        <td>${badge(c.statut)}</td>
        <td>${ligneActions(c)}</td>
      `;
          tbody.appendChild(tr);
        });
    }

    search.addEventListener('input', render);
    filtreRole.addEventListener('change', render);
    filtreStatut.addEventListener('change', render);

    function resetFiltres() {
      search.value = "";
      filtreRole.value = "";
      filtreStatut.value = "";
      render();
    }

    // --- Consulter / RDV (aperçu) ---
    function consulter(id) {
      const c = comptes.find(x => x.id === id);
      if (!c) return;
      voirRDV(id);
      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }

    function voirRDV(id) {
      const c = comptes.find(x => x.id === id);
      const zone = document.getElementById('rdvZone');
      if (!c) return;
      if (c.role === 'Admin') {
        zone.innerHTML = `<em>Les administrateurs n'ont pas de rendez‑vous assignés.</em>`;
        return;
      }
      // exemple statique
      zone.innerHTML = `
    <table>
      <thead>
        <tr>
          <th style="min-width:140px;">Utilisateur sélectionné</th>
          <th>Date</th>
          <th>Heure</th>
          <th>Service</th>
          <th>Statut</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>${c.nom} (${c.role})</td>
          <td>2025‑11‑05</td>
          <td>10:00 – 10:30</td>
          <td>Math 1</td>
          <td><span class="badge actif">Confirmé</span></td>
        </tr>
        <tr>
          <td>${c.nom} (${c.role})</td>
          <td>2025‑11‑12</td>
          <td>13:00 – 13:30</td>
          <td>Programmation</td>
          <td><span class="badge inactif">Annulé</span></td>
        </tr>
      </tbody>
    </table>
  `;
    }

    // --- Modifier / créer (modal) ---
    let currentId = null;
    function ouvrirModal(id) {
      const modal = document.getElementById('modalCompte');
      document.getElementById('modalTitre').textContent = "Modifier le compte";
      const c = comptes.find(x => x.id === id);
      if (!c) return;
      currentId = id;
      document.getElementById('f_id').value = c.id;
      document.getElementById('f_nom').value = c.nom;
      document.getElementById('f_role').value = c.role;
      document.getElementById('f_email').value = c.email;
      document.getElementById('f_statut').value = c.statut;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
    }

    function ouvrirModalCreation() {
      const modal = document.getElementById('modalCompte');
      document.getElementById('modalTitre').textContent = "Créer un compte";
      currentId = null;
      document.getElementById('f_id').value = "(auto)";
      document.getElementById('f_nom').value = "";
      document.getElementById('f_role').value = "Étudiant";
      document.getElementById('f_email').value = "";
      document.getElementById('f_statut').value = "actif";
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
    }

    function fermerModal() {
      const modal = document.getElementById('modalCompte');
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
    }

    function sauvegarderCompte() {
      const nom = document.getElementById('f_nom').value.trim();
      const role = document.getElementById('f_role').value;
      const email = document.getElementById('f_email').value.trim();
      const statut = document.getElementById('f_statut').value;
      if (!nom || !email) return;

      if (currentId == null) {
        // création (statique)
        const newId = Math.max(...comptes.map(c => c.id)) + 1;
        comptes.push({ id: newId, nom, role, email, statut });
      } else {
        const c = comptes.find(x => x.id === currentId);
        if (c) { c.nom = nom; c.role = role; c.email = email; c.statut = statut; }
      }
      render();
      fermerModal();
      showToast("Changements sauvegardés");
    }

    function toggleStatut(id) {
      const c = comptes.find(x => x.id === id);
      if (!c) return;
      c.statut = (c.statut === 'actif') ? 'inactif' : 'actif';
      render();
      showToast(`Le compte ${c.nom} est maintenant ${c.statut}.`);
    }

    // Toast
    let toastTimer = null;
    function showToast(msg) {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => t.classList.remove('show'), 2200);
    }

    // init
    render();
  </script>
</body>

</html>